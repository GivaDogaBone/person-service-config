apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../base

#namePrefix: dev-
commonLabels:
  variant: development


# replace the image tag of the container with latest
images:
- name: quay.io/wpernath/person-service:latest
  newName: quay.io/wpernath/person-service
  newTag: v1.0.0-beta3

# generate a configmap 
configMapGenerator:
- literals:
  - APP_GREETING=We are in DEVELOPMENT mode
  name: app-config
      
# this patch needs to be done, because kustomize does not change 
# the route target service name
#patches:
#- patch: |-
#    - op: replace
#      path: /spec/to/name
#      value: dev-person-service
# target:
#   kind: Route
